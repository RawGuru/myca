 schemaname |     tablename      |                  policyname                   | permissive |  roles   |  cmd   |                                                                 qual                                                                  |                                                            with_check                                                             
------------+--------------------+-----------------------------------------------+------------+----------+--------+---------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------
 public     | profiles           | Public profiles are viewable by everyone      | PERMISSIVE | {public} | SELECT | true                                                                                                                                  | 
 public     | profiles           | Users can update own profile                  | PERMISSIVE | {public} | UPDATE | (auth.uid() = id)                                                                                                                     | 
 public     | profiles           | Users can insert own profile                  | PERMISSIVE | {public} | INSERT |                                                                                                                                       | (auth.uid() = id)
 public     | qualities_received | Qualities are viewable by everyone            | PERMISSIVE | {public} | SELECT | true                                                                                                                                  | 
 public     | reflections        | Reflections viewable by everyone              | PERMISSIVE | {public} | SELECT | true                                                                                                                                  | 
 public     | reflections        | Participants can create reflections           | PERMISSIVE | {public} | INSERT |                                                                                                                                       | ((auth.uid() = seeker_id) OR (auth.uid() = giver_id))
 public     | saved_givers       | Users can manage own saves                    | PERMISSIVE | {public} | ALL    | (auth.uid() = seeker_id)                                                                                                              | 
 public     | user_profiles      | Users can view own profile                    | PERMISSIVE | {public} | SELECT | (auth.uid() = id)                                                                                                                     | 
 public     | user_profiles      | Users can insert own profile                  | PERMISSIVE | {public} | INSERT |                                                                                                                                       | (auth.uid() = id)
 public     | user_profiles      | Users can update own profile                  | PERMISSIVE | {public} | UPDATE | (auth.uid() = id)                                                                                                                     | 
 public     | listings           | Anyone can view active listings               | PERMISSIVE | {public} | SELECT | (is_active = true)                                                                                                                    | 
 public     | listings           | Users can view own listings                   | PERMISSIVE | {public} | SELECT | (auth.uid() = user_id)                                                                                                                | 
 public     | bookings           | Seekers can view their bookings               | PERMISSIVE | {public} | SELECT | (auth.uid() = seeker_id)                                                                                                              | 
 public     | bookings           | Givers can view their bookings                | PERMISSIVE | {public} | SELECT | (auth.uid() = giver_id)                                                                                                               | 
 public     | bookings           | Seekers can insert bookings                   | PERMISSIVE | {public} | INSERT |                                                                                                                                       | (auth.uid() = seeker_id)
 public     | bookings           | Seekers can update their bookings             | PERMISSIVE | {public} | UPDATE | (auth.uid() = seeker_id)                                                                                                              | (auth.uid() = seeker_id)
 public     | bookings           | Givers can update their bookings              | PERMISSIVE | {public} | UPDATE | (auth.uid() = giver_id)                                                                                                               | (auth.uid() = giver_id)
 public     | giver_availability | Givers can view their availability            | PERMISSIVE | {public} | SELECT | (auth.uid() = giver_id)                                                                                                               | 
 public     | giver_availability | Givers can insert their availability          | PERMISSIVE | {public} | INSERT |                                                                                                                                       | (auth.uid() = giver_id)
 public     | giver_availability | Givers can update their availability          | PERMISSIVE | {public} | UPDATE | (auth.uid() = giver_id)                                                                                                               | 
 public     | giver_availability | Givers can delete their availability          | PERMISSIVE | {public} | DELETE | (auth.uid() = giver_id)                                                                                                               | 
 public     | giver_availability | Anyone can view available slots               | PERMISSIVE | {public} | SELECT | (is_booked = false)                                                                                                                   | 
 public     | listings           | Users can create own listings                 | PERMISSIVE | {public} | INSERT |                                                                                                                                       | (auth.uid() = user_id)
 public     | listings           | Users can update own listings                 | PERMISSIVE | {public} | UPDATE | (auth.uid() = user_id)                                                                                                                | 
 public     | listings           | Users can delete own listings                 | PERMISSIVE | {public} | DELETE | (auth.uid() = user_id)                                                                                                                | 
 public     | listing_categories | Anyone can view categories                    | PERMISSIVE | {public} | SELECT | true                                                                                                                                  | 
 public     | listing_categories | Owners can manage categories                  | PERMISSIVE | {public} | ALL    | (EXISTS ( SELECT 1                                                                                                                   +| 
            |                    |                                               |            |          |        |    FROM listings                                                                                                                     +| 
            |                    |                                               |            |          |        |   WHERE ((listings.id = listing_categories.listing_id) AND (listings.user_id = auth.uid()))))                                         | 
 public     | session_states     | Booking participants can view session state   | PERMISSIVE | {public} | SELECT | (EXISTS ( SELECT 1                                                                                                                   +| 
            |                    |                                               |            |          |        |    FROM bookings                                                                                                                     +| 
            |                    |                                               |            |          |        |   WHERE ((bookings.id = session_states.booking_id) AND ((bookings.seeker_id = auth.uid()) OR (bookings.giver_id = auth.uid())))))     | 
 public     | session_states     | Booking participants can update session state | PERMISSIVE | {public} | UPDATE | (EXISTS ( SELECT 1                                                                                                                   +| 
            |                    |                                               |            |          |        |    FROM bookings                                                                                                                     +| 
            |                    |                                               |            |          |        |   WHERE ((bookings.id = session_states.booking_id) AND ((bookings.seeker_id = auth.uid()) OR (bookings.giver_id = auth.uid())))))     | 
 public     | session_states     | Booking participants can insert session state | PERMISSIVE | {public} | INSERT |                                                                                                                                       | (EXISTS ( SELECT 1                                                                                                               +
            |                    |                                               |            |          |        |                                                                                                                                       |    FROM bookings                                                                                                                 +
            |                    |                                               |            |          |        |                                                                                                                                       |   WHERE ((bookings.id = session_states.booking_id) AND ((bookings.seeker_id = auth.uid()) OR (bookings.giver_id = auth.uid())))))
 public     | session_milestones | Booking participants can view milestones      | PERMISSIVE | {public} | SELECT | (EXISTS ( SELECT 1                                                                                                                   +| 
            |                    |                                               |            |          |        |    FROM bookings                                                                                                                     +| 
            |                    |                                               |            |          |        |   WHERE ((bookings.id = session_milestones.booking_id) AND ((bookings.seeker_id = auth.uid()) OR (bookings.giver_id = auth.uid()))))) | 
 public     | session_milestones | System can insert milestones                  | PERMISSIVE | {public} | INSERT |                                                                                                                                       | true
 public     | giver_metrics      | Allow read access for discovery ranking       | PERMISSIVE | {public} | SELECT | true                                                                                                                                  | 
 public     | giver_metrics      | Only system can modify giver metrics          | PERMISSIVE | {public} | INSERT |                                                                                                                                       | false
 public     | giver_metrics      | Only system can update giver metrics          | PERMISSIVE | {public} | UPDATE | false                                                                                                                                 | 
 public     | giver_metrics      | Only system can delete giver metrics          | PERMISSIVE | {public} | DELETE | false                                                                                                                                 | 
 public     | extensions         | Participants can view their extensions        | PERMISSIVE | {public} | SELECT | (EXISTS ( SELECT 1                                                                                                                   +| 
            |                    |                                               |            |          |        |    FROM bookings                                                                                                                     +| 
            |                    |                                               |            |          |        |   WHERE ((bookings.id = extensions.booking_id) AND ((bookings.seeker_id = auth.uid()) OR (bookings.giver_id = auth.uid())))))         | 
 public     | extensions         | Participants can create extensions            | PERMISSIVE | {public} | INSERT |                                                                                                                                       | (EXISTS ( SELECT 1                                                                                                               +
            |                    |                                               |            |          |        |                                                                                                                                       |    FROM bookings                                                                                                                 +
            |                    |                                               |            |          |        |                                                                                                                                       |   WHERE ((bookings.id = extensions.booking_id) AND ((bookings.seeker_id = auth.uid()) OR (bookings.giver_id = auth.uid())))))
 public     | extensions         | Participants can update their extensions      | PERMISSIVE | {public} | UPDATE | (EXISTS ( SELECT 1                                                                                                                   +| 
            |                    |                                               |            |          |        |    FROM bookings                                                                                                                     +| 
            |                    |                                               |            |          |        |   WHERE ((bookings.id = extensions.booking_id) AND ((bookings.seeker_id = auth.uid()) OR (bookings.giver_id = auth.uid())))))         | 
 public     | blocked_users      | Users can view their own blocks               | PERMISSIVE | {public} | SELECT | (auth.uid() = blocker_id)                                                                                                             | 
 public     | blocked_users      | Users can create blocks                       | PERMISSIVE | {public} | INSERT |                                                                                                                                       | (auth.uid() = blocker_id)
 public     | blocked_users      | Users can delete their own blocks             | PERMISSIVE | {public} | DELETE | (auth.uid() = blocker_id)                                                                                                             | 
(42 rows)

